LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

-- RECEBE CLOCK DE 1KHZ
-- CONTA ATE 32S
-- CONTA SEMPRE EM VALORES INTEIROS DE SEGUNDOS
-- É UM CONTADOR DE SEGUNDOS COM PRECISAO EM MILISSEGUNDOS
ENTITY TEMPORIZADOR IS
PORT (
		CLK_I : IN STD_LOGIC;
		TEMPO : IN STD_LOGIC_VECTOR(4 DOWNTO 0); -- EM SEGUNDOS
		SINAL_FINAL : OUT STD_LOGIC;
		CLK_O : OUT STD_LOGIC
);

END CONTADOR_MS;

ARCHITECTURE LOGICA OF TEMPORIZADOR IS

BEGIN

PROCESS(CLK_I)
	-- CONTADOR_BINARY PODE SER CONSIDERADO COMO CONTADOR DE SEGUNDOS
	-- CONTADOR_BINARY É UM VETOR BINARIO POIS É COMPARADO AO VALOR
	-- BINARIO DE ENTRADA DO MODULO, ISSO EVITA CONVERTER INT -> BIN
	VARIABLE CONTADOR_BINARY : STD_LOGIC_VECTOR(4 DOWNTO 0) := "00000";
	VARIABLE CONTADOR_INTEGER : INTEGER := 1;
BEGIN
	
	IF( CLK_I'EVENT AND CLK_I = '0') THEN
	
	CONTADOR_INTEGER := CONTADOR_INTEGER + 1;
		
		
		IF ( CONTADOR_INTEGER = 1000) THEN
			
			CONTADOR_BINARY <= STD_LOGIC_VECTOR( UNSIGNED(CONTADOR) + "00001");
			
			-- COMO CONTADOR_BINARY É COMPARADO A UM VALOR BINARIO
			-- 
			IF (CONTADOR_BINARY = TEMPO) THEN
			-- SE ATINGIR O TEMPO TOTAL
			-- ENVIAR SINAL PARA ACIONAR 
			-- O OUTRO TEMPORIZADOR
			
			CONTADOR := "00000";
			
		END IF;
		
		END IF;
		
		
		
	
	END IF;

END PROCESS;


END LOGICA;